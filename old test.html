<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Investment Recommendation</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <style>
    body { background: #f8f9fa; }
    .container { max-width: 800px; margin-top: 30px; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
    h2, h3 { text-align: center; margin-bottom: 20px; }
    .form-label { margin-top: 10px; }
    canvas { max-width: 100% !important; }
    table { margin-top: 20px; }
    .btn { margin-right: 10px; }
     .logo {
            width: 150px;
            margin-bottom: 10px;
        }
  </style>
</head>
<body>

<div class="container" id="content">
<img src="logo.jpeg" alt="Curate My Money Logo" class="logo">
  <h2>Investment Recommendation Form</h2>

  <div class="row g-3">
    <div class="col-md-6">
      <label class="form-label">Client Name</label>
      <input type="text" id="clientName" class="form-control">
    </div>
    <div class="col-md-3">
      <label class="form-label">Age</label>
      <input type="number" id="age" class="form-control">
    </div>
    <div class="col-md-3">
      <label class="form-label">PAN</label>
      <input type="text" id="pan" class="form-control">
    </div>
    <div class="col-md-6">
      <label class="form-label">City</label>
      <input type="text" id="city" class="form-control">
    </div>
    <div class="col-md-6">
      <label class="form-label">Objective</label>
      <input type="text" id="objective" class="form-control">
    </div>
    <div class="col-md-6">
      <label class="form-label">Investment Duration (years)</label>
      <input type="number" id="invDuration" class="form-control">
    </div>
    <div class="col-md-6">
      <label class="form-label">Risk Profile</label>
      <select id="riskProfile" class="form-select">
        <option>Conservative</option>
        <option>Conservative to Moderate</option>
        <option>Moderate</option>
        <option>Moderate to Aggressive</option>
        <option>Aggressive</option>
      </select>
    </div>
    <div class="col-md-6">
      <label class="form-label">Investment Type</label>
      <select id="invType" class="form-select">
        <option>SIP</option>
        <option>Lumpsum</option>
      </select>
    </div>
    <div class="col-md-6">
      <label class="form-label">Investment Amount</label>
      <input type="number" id="amount" class="form-control">
    </div>
    <div class="col-md-6">
      <label class="form-label">Assumed Rate of Return (%)</label>
      <input type="number" id="rateOfReturn" class="form-control">
    </div>
  </div>

  <div class="text-center mt-4">
    <button onclick="calculateRecommendation()" class="btn btn-primary">Generate Recommendation</button>
    <button onclick="downloadPDF()" class="btn btn-outline-secondary">Download as PDF</button>
  </div>

  <h3>Asset Allocation</h3>
  <div class="d-flex justify-content-center">
    <canvas id="pieChart" width="300" height="300"></canvas>
  </div>

  <h3>Recommended Funds</h3>
  <div class="table-responsive">
    <table class="table table-striped">
      <thead class="table-light">
        <tr><th>Scheme Name</th><th>Allocation %</th><th>Category</th></tr>
      </thead>
      <tbody id="fundTable"></tbody>
    </table>
  </div>
</div>

<script>
function calculateRecommendation() {
  const type = document.getElementById("invType").value;
  const amount = parseFloat(document.getElementById("amount").value);
  const duration = parseInt(document.getElementById("invDuration").value);
  const rate = parseFloat(document.getElementById("rateOfReturn").value) / 100;

  let sip = 0, lumpsum = 0;
  if (type === "SIP") {
    sip = (amount * (((Math.pow(1 + rate / 12, 12 * duration)) - 1) * (1 + rate / 12)) / (rate / 12)).toFixed(2);
    alert("Future Value (SIP): ₹" + sip);
  } else {
    lumpsum = (amount * Math.pow((1 + rate), duration)).toFixed(2);
    alert("Future Value (Lumpsum): ₹" + lumpsum);
  }

  const equity = 60, debt = 30, hybrid = 10;
  const data = [equity, debt, hybrid];
  const ctx = document.getElementById("pieChart").getContext("2d");
  new Chart(ctx, {
    type: 'pie',
    data: {
      labels: ['Equity', 'Debt', 'Hybrid'],
      datasets: [{ data: data, backgroundColor: ['#36A2EB', '#FFCE56', '#FF6384'] }]
    },
    options: { responsive: true, plugins: { legend: { position: 'bottom' } } }
  });

  const fundTable = document.getElementById("fundTable");
  fundTable.innerHTML = "";
  const sampleFunds = [
    { name: "ABC Equity Fund", percent: "40", category: "Equity" },
    { name: "XYZ Debt Fund", percent: "30", category: "Debt" },
    { name: "LMN Hybrid Fund", percent: "30", category: "Hybrid" },
  ];
  sampleFunds.forEach(fund => {
    const row = `<tr><td>${fund.name}</td><td>${fund.percent}</td><td>${fund.category}</td></tr>`;
    fundTable.innerHTML += row;
  });
}

function downloadPDF() {
  const element = document.getElementById("content");
  html2pdf().from(element).save("Investment_Recommendation.pdf");
}
</script>

</body>
</html>